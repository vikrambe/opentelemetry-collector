// Copyright 2020 OpenTelemetry Authors
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Code generated by "internal/data_generator/main.go". DO NOT EDIT.
// To regenerate this file run "go run internal/data_generator/main.go".

package data

import (
	"testing"
	
	otlpmetrics "github.com/open-telemetry/opentelemetry-proto/gen/go/metrics/v1"
	"github.com/stretchr/testify/assert"
)

func TestResourceMetricsSlice(t *testing.T) {
	es := NewResourceMetricsSlice(0)
	assert.EqualValues(t, 0, es.Len())
	es = newResourceMetricsSlice(&[]*otlpmetrics.ResourceMetrics{})
	assert.EqualValues(t, 0, es.Len())
	es = NewResourceMetricsSlice(13)
	testVal := generateTestResourceMetrics()
	assert.EqualValues(t, 13, es.Len())
	for i := 0; i < es.Len(); i++ {
		assert.EqualValues(t, NewEmptyResourceMetrics(), es.Get(i))
		fillTestResourceMetrics(es.Get(i))
		assert.EqualValues(t, testVal, es.Get(i))
	}

	// Test resize.
	const resizeLo = 2
	const resizeHi = 10
	expectedEs := make(map[ResourceMetrics]bool, resizeHi-resizeLo)
	for i := resizeLo; i < resizeHi; i++ {
		expectedEs[es.Get(i)] = true
	}
	assert.EqualValues(t, resizeHi-resizeLo, len(expectedEs))
	es.Resize(resizeLo, resizeHi)
	assert.EqualValues(t, resizeHi-resizeLo, es.Len())
	foundEs := make(map[ResourceMetrics]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)

	// Test remove.
	const removePos = 2
	delete(expectedEs, es.Get(removePos))
	es.Remove(removePos)
	assert.EqualValues(t, resizeHi-resizeLo-1, es.Len())
	foundEs = make(map[ResourceMetrics]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)
}

func TestResourceMetrics(t *testing.T) {
	assert.EqualValues(t, true, newResourceMetrics(nil).IsNil())
	ms := newResourceMetrics(&otlpmetrics.ResourceMetrics{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, true, ms.Resource().IsNil())
	ms.InitResourceIfNil()
	assert.EqualValues(t, false, ms.Resource().IsNil())
	assert.EqualValues(t, NewEmptyResource(), ms.Resource())
	testValResource := generateTestResource()
	fillTestResource(ms.Resource())
	assert.EqualValues(t, testValResource, ms.Resource())
	assert.EqualValues(t, false, ms.Resource().IsNil())

	assert.EqualValues(t, NewInstrumentationLibraryMetricsSlice(0), ms.InstrumentationLibraryMetrics())
	testValInstrumentationLibraryMetrics := generateTestInstrumentationLibraryMetricsSlice()
	ms.SetInstrumentationLibraryMetrics(testValInstrumentationLibraryMetrics)
	assert.EqualValues(t, testValInstrumentationLibraryMetrics, ms.InstrumentationLibraryMetrics())

	assert.EqualValues(t, generateTestResourceMetrics(), ms)
}

func TestInstrumentationLibraryMetricsSlice(t *testing.T) {
	es := NewInstrumentationLibraryMetricsSlice(0)
	assert.EqualValues(t, 0, es.Len())
	es = newInstrumentationLibraryMetricsSlice(&[]*otlpmetrics.InstrumentationLibraryMetrics{})
	assert.EqualValues(t, 0, es.Len())
	es = NewInstrumentationLibraryMetricsSlice(13)
	testVal := generateTestInstrumentationLibraryMetrics()
	assert.EqualValues(t, 13, es.Len())
	for i := 0; i < es.Len(); i++ {
		assert.EqualValues(t, NewEmptyInstrumentationLibraryMetrics(), es.Get(i))
		fillTestInstrumentationLibraryMetrics(es.Get(i))
		assert.EqualValues(t, testVal, es.Get(i))
	}

	// Test resize.
	const resizeLo = 2
	const resizeHi = 10
	expectedEs := make(map[InstrumentationLibraryMetrics]bool, resizeHi-resizeLo)
	for i := resizeLo; i < resizeHi; i++ {
		expectedEs[es.Get(i)] = true
	}
	assert.EqualValues(t, resizeHi-resizeLo, len(expectedEs))
	es.Resize(resizeLo, resizeHi)
	assert.EqualValues(t, resizeHi-resizeLo, es.Len())
	foundEs := make(map[InstrumentationLibraryMetrics]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)

	// Test remove.
	const removePos = 2
	delete(expectedEs, es.Get(removePos))
	es.Remove(removePos)
	assert.EqualValues(t, resizeHi-resizeLo-1, es.Len())
	foundEs = make(map[InstrumentationLibraryMetrics]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)
}

func TestInstrumentationLibraryMetrics(t *testing.T) {
	assert.EqualValues(t, true, newInstrumentationLibraryMetrics(nil).IsNil())
	ms := newInstrumentationLibraryMetrics(&otlpmetrics.InstrumentationLibraryMetrics{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, true, ms.InstrumentationLibrary().IsNil())
	ms.InitInstrumentationLibraryIfNil()
	assert.EqualValues(t, false, ms.InstrumentationLibrary().IsNil())
	assert.EqualValues(t, NewEmptyInstrumentationLibrary(), ms.InstrumentationLibrary())
	testValInstrumentationLibrary := generateTestInstrumentationLibrary()
	fillTestInstrumentationLibrary(ms.InstrumentationLibrary())
	assert.EqualValues(t, testValInstrumentationLibrary, ms.InstrumentationLibrary())
	assert.EqualValues(t, false, ms.InstrumentationLibrary().IsNil())

	assert.EqualValues(t, NewMetricSlice(0), ms.Metrics())
	testValMetrics := generateTestMetricSlice()
	ms.SetMetrics(testValMetrics)
	assert.EqualValues(t, testValMetrics, ms.Metrics())

	assert.EqualValues(t, generateTestInstrumentationLibraryMetrics(), ms)
}

func TestMetricSlice(t *testing.T) {
	es := NewMetricSlice(0)
	assert.EqualValues(t, 0, es.Len())
	es = newMetricSlice(&[]*otlpmetrics.Metric{})
	assert.EqualValues(t, 0, es.Len())
	es = NewMetricSlice(13)
	testVal := generateTestMetric()
	assert.EqualValues(t, 13, es.Len())
	for i := 0; i < es.Len(); i++ {
		assert.EqualValues(t, NewEmptyMetric(), es.Get(i))
		fillTestMetric(es.Get(i))
		assert.EqualValues(t, testVal, es.Get(i))
	}

	// Test resize.
	const resizeLo = 2
	const resizeHi = 10
	expectedEs := make(map[Metric]bool, resizeHi-resizeLo)
	for i := resizeLo; i < resizeHi; i++ {
		expectedEs[es.Get(i)] = true
	}
	assert.EqualValues(t, resizeHi-resizeLo, len(expectedEs))
	es.Resize(resizeLo, resizeHi)
	assert.EqualValues(t, resizeHi-resizeLo, es.Len())
	foundEs := make(map[Metric]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)

	// Test remove.
	const removePos = 2
	delete(expectedEs, es.Get(removePos))
	es.Remove(removePos)
	assert.EqualValues(t, resizeHi-resizeLo-1, es.Len())
	foundEs = make(map[Metric]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)
}

func TestMetric(t *testing.T) {
	assert.EqualValues(t, true, newMetric(nil).IsNil())
	ms := newMetric(&otlpmetrics.Metric{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, true, ms.MetricDescriptor().IsNil())
	ms.InitMetricDescriptorIfNil()
	assert.EqualValues(t, false, ms.MetricDescriptor().IsNil())
	assert.EqualValues(t, NewEmptyMetricDescriptor(), ms.MetricDescriptor())
	testValMetricDescriptor := generateTestMetricDescriptor()
	fillTestMetricDescriptor(ms.MetricDescriptor())
	assert.EqualValues(t, testValMetricDescriptor, ms.MetricDescriptor())
	assert.EqualValues(t, false, ms.MetricDescriptor().IsNil())

	assert.EqualValues(t, NewInt64DataPointSlice(0), ms.Int64DataPoints())
	testValInt64DataPoints := generateTestInt64DataPointSlice()
	ms.SetInt64DataPoints(testValInt64DataPoints)
	assert.EqualValues(t, testValInt64DataPoints, ms.Int64DataPoints())

	assert.EqualValues(t, NewDoubleDataPointSlice(0), ms.DoubleDataPoints())
	testValDoubleDataPoints := generateTestDoubleDataPointSlice()
	ms.SetDoubleDataPoints(testValDoubleDataPoints)
	assert.EqualValues(t, testValDoubleDataPoints, ms.DoubleDataPoints())

	assert.EqualValues(t, NewHistogramDataPointSlice(0), ms.HistogramDataPoints())
	testValHistogramDataPoints := generateTestHistogramDataPointSlice()
	ms.SetHistogramDataPoints(testValHistogramDataPoints)
	assert.EqualValues(t, testValHistogramDataPoints, ms.HistogramDataPoints())

	assert.EqualValues(t, NewSummaryDataPointSlice(0), ms.SummaryDataPoints())
	testValSummaryDataPoints := generateTestSummaryDataPointSlice()
	ms.SetSummaryDataPoints(testValSummaryDataPoints)
	assert.EqualValues(t, testValSummaryDataPoints, ms.SummaryDataPoints())

	assert.EqualValues(t, generateTestMetric(), ms)
}

func TestMetricDescriptor(t *testing.T) {
	assert.EqualValues(t, true, newMetricDescriptor(nil).IsNil())
	ms := newMetricDescriptor(&otlpmetrics.MetricDescriptor{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, "", ms.Name())
	testValName := "test_name"
	ms.SetName(testValName)
	assert.EqualValues(t, testValName, ms.Name())

	assert.EqualValues(t, "", ms.Description())
	testValDescription := "test_description"
	ms.SetDescription(testValDescription)
	assert.EqualValues(t, testValDescription, ms.Description())

	assert.EqualValues(t, "", ms.Unit())
	testValUnit := "1"
	ms.SetUnit(testValUnit)
	assert.EqualValues(t, testValUnit, ms.Unit())

	assert.EqualValues(t, MetricTypeUnspecified, ms.Type())
	testValType := MetricTypeGaugeInt64
	ms.SetType(testValType)
	assert.EqualValues(t, testValType, ms.Type())

	assert.EqualValues(t, NewStringMap(nil), ms.LabelsMap())
	testValLabelsMap := generateTestStringMap()
	ms.SetLabelsMap(testValLabelsMap)
	assert.EqualValues(t, testValLabelsMap, ms.LabelsMap())

	assert.EqualValues(t, generateTestMetricDescriptor(), ms)
}

func TestInt64DataPointSlice(t *testing.T) {
	es := NewInt64DataPointSlice(0)
	assert.EqualValues(t, 0, es.Len())
	es = newInt64DataPointSlice(&[]*otlpmetrics.Int64DataPoint{})
	assert.EqualValues(t, 0, es.Len())
	es = NewInt64DataPointSlice(13)
	testVal := generateTestInt64DataPoint()
	assert.EqualValues(t, 13, es.Len())
	for i := 0; i < es.Len(); i++ {
		assert.EqualValues(t, NewEmptyInt64DataPoint(), es.Get(i))
		fillTestInt64DataPoint(es.Get(i))
		assert.EqualValues(t, testVal, es.Get(i))
	}

	// Test resize.
	const resizeLo = 2
	const resizeHi = 10
	expectedEs := make(map[Int64DataPoint]bool, resizeHi-resizeLo)
	for i := resizeLo; i < resizeHi; i++ {
		expectedEs[es.Get(i)] = true
	}
	assert.EqualValues(t, resizeHi-resizeLo, len(expectedEs))
	es.Resize(resizeLo, resizeHi)
	assert.EqualValues(t, resizeHi-resizeLo, es.Len())
	foundEs := make(map[Int64DataPoint]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)

	// Test remove.
	const removePos = 2
	delete(expectedEs, es.Get(removePos))
	es.Remove(removePos)
	assert.EqualValues(t, resizeHi-resizeLo-1, es.Len())
	foundEs = make(map[Int64DataPoint]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)
}

func TestInt64DataPoint(t *testing.T) {
	assert.EqualValues(t, true, newInt64DataPoint(nil).IsNil())
	ms := newInt64DataPoint(&otlpmetrics.Int64DataPoint{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, NewStringMap(nil), ms.LabelsMap())
	testValLabelsMap := generateTestStringMap()
	ms.SetLabelsMap(testValLabelsMap)
	assert.EqualValues(t, testValLabelsMap, ms.LabelsMap())

	assert.EqualValues(t, TimestampUnixNano(0), ms.StartTime())
	testValStartTime := TimestampUnixNano(1234567890)
	ms.SetStartTime(testValStartTime)
	assert.EqualValues(t, testValStartTime, ms.StartTime())

	assert.EqualValues(t, TimestampUnixNano(0), ms.Timestamp())
	testValTimestamp := TimestampUnixNano(1234567890)
	ms.SetTimestamp(testValTimestamp)
	assert.EqualValues(t, testValTimestamp, ms.Timestamp())

	assert.EqualValues(t, int64(0), ms.Value())
	testValValue := int64(-17)
	ms.SetValue(testValValue)
	assert.EqualValues(t, testValValue, ms.Value())

	assert.EqualValues(t, generateTestInt64DataPoint(), ms)
}

func TestDoubleDataPointSlice(t *testing.T) {
	es := NewDoubleDataPointSlice(0)
	assert.EqualValues(t, 0, es.Len())
	es = newDoubleDataPointSlice(&[]*otlpmetrics.DoubleDataPoint{})
	assert.EqualValues(t, 0, es.Len())
	es = NewDoubleDataPointSlice(13)
	testVal := generateTestDoubleDataPoint()
	assert.EqualValues(t, 13, es.Len())
	for i := 0; i < es.Len(); i++ {
		assert.EqualValues(t, NewEmptyDoubleDataPoint(), es.Get(i))
		fillTestDoubleDataPoint(es.Get(i))
		assert.EqualValues(t, testVal, es.Get(i))
	}

	// Test resize.
	const resizeLo = 2
	const resizeHi = 10
	expectedEs := make(map[DoubleDataPoint]bool, resizeHi-resizeLo)
	for i := resizeLo; i < resizeHi; i++ {
		expectedEs[es.Get(i)] = true
	}
	assert.EqualValues(t, resizeHi-resizeLo, len(expectedEs))
	es.Resize(resizeLo, resizeHi)
	assert.EqualValues(t, resizeHi-resizeLo, es.Len())
	foundEs := make(map[DoubleDataPoint]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)

	// Test remove.
	const removePos = 2
	delete(expectedEs, es.Get(removePos))
	es.Remove(removePos)
	assert.EqualValues(t, resizeHi-resizeLo-1, es.Len())
	foundEs = make(map[DoubleDataPoint]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)
}

func TestDoubleDataPoint(t *testing.T) {
	assert.EqualValues(t, true, newDoubleDataPoint(nil).IsNil())
	ms := newDoubleDataPoint(&otlpmetrics.DoubleDataPoint{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, NewStringMap(nil), ms.LabelsMap())
	testValLabelsMap := generateTestStringMap()
	ms.SetLabelsMap(testValLabelsMap)
	assert.EqualValues(t, testValLabelsMap, ms.LabelsMap())

	assert.EqualValues(t, TimestampUnixNano(0), ms.StartTime())
	testValStartTime := TimestampUnixNano(1234567890)
	ms.SetStartTime(testValStartTime)
	assert.EqualValues(t, testValStartTime, ms.StartTime())

	assert.EqualValues(t, TimestampUnixNano(0), ms.Timestamp())
	testValTimestamp := TimestampUnixNano(1234567890)
	ms.SetTimestamp(testValTimestamp)
	assert.EqualValues(t, testValTimestamp, ms.Timestamp())

	assert.EqualValues(t, float64(0.0), ms.Value())
	testValValue := float64(17.13)
	ms.SetValue(testValValue)
	assert.EqualValues(t, testValValue, ms.Value())

	assert.EqualValues(t, generateTestDoubleDataPoint(), ms)
}

func TestHistogramDataPointSlice(t *testing.T) {
	es := NewHistogramDataPointSlice(0)
	assert.EqualValues(t, 0, es.Len())
	es = newHistogramDataPointSlice(&[]*otlpmetrics.HistogramDataPoint{})
	assert.EqualValues(t, 0, es.Len())
	es = NewHistogramDataPointSlice(13)
	testVal := generateTestHistogramDataPoint()
	assert.EqualValues(t, 13, es.Len())
	for i := 0; i < es.Len(); i++ {
		assert.EqualValues(t, NewEmptyHistogramDataPoint(), es.Get(i))
		fillTestHistogramDataPoint(es.Get(i))
		assert.EqualValues(t, testVal, es.Get(i))
	}

	// Test resize.
	const resizeLo = 2
	const resizeHi = 10
	expectedEs := make(map[HistogramDataPoint]bool, resizeHi-resizeLo)
	for i := resizeLo; i < resizeHi; i++ {
		expectedEs[es.Get(i)] = true
	}
	assert.EqualValues(t, resizeHi-resizeLo, len(expectedEs))
	es.Resize(resizeLo, resizeHi)
	assert.EqualValues(t, resizeHi-resizeLo, es.Len())
	foundEs := make(map[HistogramDataPoint]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)

	// Test remove.
	const removePos = 2
	delete(expectedEs, es.Get(removePos))
	es.Remove(removePos)
	assert.EqualValues(t, resizeHi-resizeLo-1, es.Len())
	foundEs = make(map[HistogramDataPoint]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)
}

func TestHistogramDataPoint(t *testing.T) {
	assert.EqualValues(t, true, newHistogramDataPoint(nil).IsNil())
	ms := newHistogramDataPoint(&otlpmetrics.HistogramDataPoint{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, NewStringMap(nil), ms.LabelsMap())
	testValLabelsMap := generateTestStringMap()
	ms.SetLabelsMap(testValLabelsMap)
	assert.EqualValues(t, testValLabelsMap, ms.LabelsMap())

	assert.EqualValues(t, TimestampUnixNano(0), ms.StartTime())
	testValStartTime := TimestampUnixNano(1234567890)
	ms.SetStartTime(testValStartTime)
	assert.EqualValues(t, testValStartTime, ms.StartTime())

	assert.EqualValues(t, TimestampUnixNano(0), ms.Timestamp())
	testValTimestamp := TimestampUnixNano(1234567890)
	ms.SetTimestamp(testValTimestamp)
	assert.EqualValues(t, testValTimestamp, ms.Timestamp())

	assert.EqualValues(t, uint64(0), ms.Count())
	testValCount := uint64(17)
	ms.SetCount(testValCount)
	assert.EqualValues(t, testValCount, ms.Count())

	assert.EqualValues(t, float64(0.0), ms.Sum())
	testValSum := float64(17.13)
	ms.SetSum(testValSum)
	assert.EqualValues(t, testValSum, ms.Sum())

	assert.EqualValues(t, NewHistogramBucketSlice(0), ms.Buckets())
	testValBuckets := generateTestHistogramBucketSlice()
	ms.SetBuckets(testValBuckets)
	assert.EqualValues(t, testValBuckets, ms.Buckets())

	assert.EqualValues(t, []float64(nil), ms.ExplicitBounds())
	testValExplicitBounds := []float64{1, 2, 3}
	ms.SetExplicitBounds(testValExplicitBounds)
	assert.EqualValues(t, testValExplicitBounds, ms.ExplicitBounds())

	assert.EqualValues(t, generateTestHistogramDataPoint(), ms)
}

func TestHistogramBucketSlice(t *testing.T) {
	es := NewHistogramBucketSlice(0)
	assert.EqualValues(t, 0, es.Len())
	es = newHistogramBucketSlice(&[]*otlpmetrics.HistogramDataPoint_Bucket{})
	assert.EqualValues(t, 0, es.Len())
	es = NewHistogramBucketSlice(13)
	testVal := generateTestHistogramBucket()
	assert.EqualValues(t, 13, es.Len())
	for i := 0; i < es.Len(); i++ {
		assert.EqualValues(t, NewEmptyHistogramBucket(), es.Get(i))
		fillTestHistogramBucket(es.Get(i))
		assert.EqualValues(t, testVal, es.Get(i))
	}

	// Test resize.
	const resizeLo = 2
	const resizeHi = 10
	expectedEs := make(map[HistogramBucket]bool, resizeHi-resizeLo)
	for i := resizeLo; i < resizeHi; i++ {
		expectedEs[es.Get(i)] = true
	}
	assert.EqualValues(t, resizeHi-resizeLo, len(expectedEs))
	es.Resize(resizeLo, resizeHi)
	assert.EqualValues(t, resizeHi-resizeLo, es.Len())
	foundEs := make(map[HistogramBucket]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)

	// Test remove.
	const removePos = 2
	delete(expectedEs, es.Get(removePos))
	es.Remove(removePos)
	assert.EqualValues(t, resizeHi-resizeLo-1, es.Len())
	foundEs = make(map[HistogramBucket]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)
}

func TestHistogramBucket(t *testing.T) {
	assert.EqualValues(t, true, newHistogramBucket(nil).IsNil())
	ms := newHistogramBucket(&otlpmetrics.HistogramDataPoint_Bucket{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, uint64(0), ms.Count())
	testValCount := uint64(17)
	ms.SetCount(testValCount)
	assert.EqualValues(t, testValCount, ms.Count())

	assert.EqualValues(t, true, ms.Exemplar().IsNil())
	ms.InitExemplarIfNil()
	assert.EqualValues(t, false, ms.Exemplar().IsNil())
	assert.EqualValues(t, NewEmptyHistogramBucketExemplar(), ms.Exemplar())
	testValExemplar := generateTestHistogramBucketExemplar()
	fillTestHistogramBucketExemplar(ms.Exemplar())
	assert.EqualValues(t, testValExemplar, ms.Exemplar())
	assert.EqualValues(t, false, ms.Exemplar().IsNil())

	assert.EqualValues(t, generateTestHistogramBucket(), ms)
}

func TestHistogramBucketExemplar(t *testing.T) {
	assert.EqualValues(t, true, newHistogramBucketExemplar(nil).IsNil())
	ms := newHistogramBucketExemplar(&otlpmetrics.HistogramDataPoint_Bucket_Exemplar{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, TimestampUnixNano(0), ms.Timestamp())
	testValTimestamp := TimestampUnixNano(1234567890)
	ms.SetTimestamp(testValTimestamp)
	assert.EqualValues(t, testValTimestamp, ms.Timestamp())

	assert.EqualValues(t, float64(0.0), ms.Value())
	testValValue := float64(17.13)
	ms.SetValue(testValValue)
	assert.EqualValues(t, testValValue, ms.Value())

	assert.EqualValues(t, NewStringMap(nil), ms.Attachments())
	testValAttachments := generateTestStringMap()
	ms.SetAttachments(testValAttachments)
	assert.EqualValues(t, testValAttachments, ms.Attachments())

	assert.EqualValues(t, generateTestHistogramBucketExemplar(), ms)
}

func TestSummaryDataPointSlice(t *testing.T) {
	es := NewSummaryDataPointSlice(0)
	assert.EqualValues(t, 0, es.Len())
	es = newSummaryDataPointSlice(&[]*otlpmetrics.SummaryDataPoint{})
	assert.EqualValues(t, 0, es.Len())
	es = NewSummaryDataPointSlice(13)
	testVal := generateTestSummaryDataPoint()
	assert.EqualValues(t, 13, es.Len())
	for i := 0; i < es.Len(); i++ {
		assert.EqualValues(t, NewEmptySummaryDataPoint(), es.Get(i))
		fillTestSummaryDataPoint(es.Get(i))
		assert.EqualValues(t, testVal, es.Get(i))
	}

	// Test resize.
	const resizeLo = 2
	const resizeHi = 10
	expectedEs := make(map[SummaryDataPoint]bool, resizeHi-resizeLo)
	for i := resizeLo; i < resizeHi; i++ {
		expectedEs[es.Get(i)] = true
	}
	assert.EqualValues(t, resizeHi-resizeLo, len(expectedEs))
	es.Resize(resizeLo, resizeHi)
	assert.EqualValues(t, resizeHi-resizeLo, es.Len())
	foundEs := make(map[SummaryDataPoint]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)

	// Test remove.
	const removePos = 2
	delete(expectedEs, es.Get(removePos))
	es.Remove(removePos)
	assert.EqualValues(t, resizeHi-resizeLo-1, es.Len())
	foundEs = make(map[SummaryDataPoint]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)
}

func TestSummaryDataPoint(t *testing.T) {
	assert.EqualValues(t, true, newSummaryDataPoint(nil).IsNil())
	ms := newSummaryDataPoint(&otlpmetrics.SummaryDataPoint{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, NewStringMap(nil), ms.LabelsMap())
	testValLabelsMap := generateTestStringMap()
	ms.SetLabelsMap(testValLabelsMap)
	assert.EqualValues(t, testValLabelsMap, ms.LabelsMap())

	assert.EqualValues(t, TimestampUnixNano(0), ms.StartTime())
	testValStartTime := TimestampUnixNano(1234567890)
	ms.SetStartTime(testValStartTime)
	assert.EqualValues(t, testValStartTime, ms.StartTime())

	assert.EqualValues(t, TimestampUnixNano(0), ms.Timestamp())
	testValTimestamp := TimestampUnixNano(1234567890)
	ms.SetTimestamp(testValTimestamp)
	assert.EqualValues(t, testValTimestamp, ms.Timestamp())

	assert.EqualValues(t, uint64(0), ms.Count())
	testValCount := uint64(17)
	ms.SetCount(testValCount)
	assert.EqualValues(t, testValCount, ms.Count())

	assert.EqualValues(t, float64(0.0), ms.Sum())
	testValSum := float64(17.13)
	ms.SetSum(testValSum)
	assert.EqualValues(t, testValSum, ms.Sum())

	assert.EqualValues(t, NewSummaryValueAtPercentileSlice(0), ms.ValueAtPercentiles())
	testValValueAtPercentiles := generateTestSummaryValueAtPercentileSlice()
	ms.SetValueAtPercentiles(testValValueAtPercentiles)
	assert.EqualValues(t, testValValueAtPercentiles, ms.ValueAtPercentiles())

	assert.EqualValues(t, generateTestSummaryDataPoint(), ms)
}

func TestSummaryValueAtPercentileSlice(t *testing.T) {
	es := NewSummaryValueAtPercentileSlice(0)
	assert.EqualValues(t, 0, es.Len())
	es = newSummaryValueAtPercentileSlice(&[]*otlpmetrics.SummaryDataPoint_ValueAtPercentile{})
	assert.EqualValues(t, 0, es.Len())
	es = NewSummaryValueAtPercentileSlice(13)
	testVal := generateTestSummaryValueAtPercentile()
	assert.EqualValues(t, 13, es.Len())
	for i := 0; i < es.Len(); i++ {
		assert.EqualValues(t, NewEmptySummaryValueAtPercentile(), es.Get(i))
		fillTestSummaryValueAtPercentile(es.Get(i))
		assert.EqualValues(t, testVal, es.Get(i))
	}

	// Test resize.
	const resizeLo = 2
	const resizeHi = 10
	expectedEs := make(map[SummaryValueAtPercentile]bool, resizeHi-resizeLo)
	for i := resizeLo; i < resizeHi; i++ {
		expectedEs[es.Get(i)] = true
	}
	assert.EqualValues(t, resizeHi-resizeLo, len(expectedEs))
	es.Resize(resizeLo, resizeHi)
	assert.EqualValues(t, resizeHi-resizeLo, es.Len())
	foundEs := make(map[SummaryValueAtPercentile]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)

	// Test remove.
	const removePos = 2
	delete(expectedEs, es.Get(removePos))
	es.Remove(removePos)
	assert.EqualValues(t, resizeHi-resizeLo-1, es.Len())
	foundEs = make(map[SummaryValueAtPercentile]bool, resizeHi-resizeLo)
	for i := 0; i < es.Len(); i++ {
		foundEs[es.Get(i)] = true
	}
	assert.EqualValues(t, expectedEs, foundEs)
}

func TestSummaryValueAtPercentile(t *testing.T) {
	assert.EqualValues(t, true, newSummaryValueAtPercentile(nil).IsNil())
	ms := newSummaryValueAtPercentile(&otlpmetrics.SummaryDataPoint_ValueAtPercentile{})
	assert.EqualValues(t, false, ms.IsNil())

	assert.EqualValues(t, float64(0.0), ms.Percentile())
	testValPercentile := float64(0.90)
	ms.SetPercentile(testValPercentile)
	assert.EqualValues(t, testValPercentile, ms.Percentile())

	assert.EqualValues(t, float64(0.0), ms.Value())
	testValValue := float64(17.13)
	ms.SetValue(testValValue)
	assert.EqualValues(t, testValValue, ms.Value())

	assert.EqualValues(t, generateTestSummaryValueAtPercentile(), ms)
}

func generateTestResourceMetricsSlice() ResourceMetricsSlice {
	tv := NewResourceMetricsSlice(13)
	for i := 0; i < tv.Len(); i++ {
		fillTestResourceMetrics(tv.Get(i))
	}
	return tv
}

func generateTestResourceMetrics() ResourceMetrics {
	tv := newResourceMetrics(&otlpmetrics.ResourceMetrics{})
	fillTestResourceMetrics(tv)
	return tv
}

func fillTestResourceMetrics(tv ResourceMetrics) {
	tv.InitResourceIfNil()
	fillTestResource(tv.Resource())
	tv.SetInstrumentationLibraryMetrics(generateTestInstrumentationLibraryMetricsSlice())
}

func generateTestInstrumentationLibraryMetricsSlice() InstrumentationLibraryMetricsSlice {
	tv := NewInstrumentationLibraryMetricsSlice(13)
	for i := 0; i < tv.Len(); i++ {
		fillTestInstrumentationLibraryMetrics(tv.Get(i))
	}
	return tv
}

func generateTestInstrumentationLibraryMetrics() InstrumentationLibraryMetrics {
	tv := newInstrumentationLibraryMetrics(&otlpmetrics.InstrumentationLibraryMetrics{})
	fillTestInstrumentationLibraryMetrics(tv)
	return tv
}

func fillTestInstrumentationLibraryMetrics(tv InstrumentationLibraryMetrics) {
	tv.InitInstrumentationLibraryIfNil()
	fillTestInstrumentationLibrary(tv.InstrumentationLibrary())
	tv.SetMetrics(generateTestMetricSlice())
}

func generateTestMetricSlice() MetricSlice {
	tv := NewMetricSlice(13)
	for i := 0; i < tv.Len(); i++ {
		fillTestMetric(tv.Get(i))
	}
	return tv
}

func generateTestMetric() Metric {
	tv := newMetric(&otlpmetrics.Metric{})
	fillTestMetric(tv)
	return tv
}

func fillTestMetric(tv Metric) {
	tv.InitMetricDescriptorIfNil()
	fillTestMetricDescriptor(tv.MetricDescriptor())
	tv.SetInt64DataPoints(generateTestInt64DataPointSlice())
	tv.SetDoubleDataPoints(generateTestDoubleDataPointSlice())
	tv.SetHistogramDataPoints(generateTestHistogramDataPointSlice())
	tv.SetSummaryDataPoints(generateTestSummaryDataPointSlice())
}

func generateTestMetricDescriptor() MetricDescriptor {
	tv := newMetricDescriptor(&otlpmetrics.MetricDescriptor{})
	fillTestMetricDescriptor(tv)
	return tv
}

func fillTestMetricDescriptor(tv MetricDescriptor) {
	tv.SetName("test_name")
	tv.SetDescription("test_description")
	tv.SetUnit("1")
	tv.SetType(MetricTypeGaugeInt64)
	tv.SetLabelsMap(generateTestStringMap())
}

func generateTestInt64DataPointSlice() Int64DataPointSlice {
	tv := NewInt64DataPointSlice(13)
	for i := 0; i < tv.Len(); i++ {
		fillTestInt64DataPoint(tv.Get(i))
	}
	return tv
}

func generateTestInt64DataPoint() Int64DataPoint {
	tv := newInt64DataPoint(&otlpmetrics.Int64DataPoint{})
	fillTestInt64DataPoint(tv)
	return tv
}

func fillTestInt64DataPoint(tv Int64DataPoint) {
	tv.SetLabelsMap(generateTestStringMap())
	tv.SetStartTime(TimestampUnixNano(1234567890))
	tv.SetTimestamp(TimestampUnixNano(1234567890))
	tv.SetValue(int64(-17))
}

func generateTestDoubleDataPointSlice() DoubleDataPointSlice {
	tv := NewDoubleDataPointSlice(13)
	for i := 0; i < tv.Len(); i++ {
		fillTestDoubleDataPoint(tv.Get(i))
	}
	return tv
}

func generateTestDoubleDataPoint() DoubleDataPoint {
	tv := newDoubleDataPoint(&otlpmetrics.DoubleDataPoint{})
	fillTestDoubleDataPoint(tv)
	return tv
}

func fillTestDoubleDataPoint(tv DoubleDataPoint) {
	tv.SetLabelsMap(generateTestStringMap())
	tv.SetStartTime(TimestampUnixNano(1234567890))
	tv.SetTimestamp(TimestampUnixNano(1234567890))
	tv.SetValue(float64(17.13))
}

func generateTestHistogramDataPointSlice() HistogramDataPointSlice {
	tv := NewHistogramDataPointSlice(13)
	for i := 0; i < tv.Len(); i++ {
		fillTestHistogramDataPoint(tv.Get(i))
	}
	return tv
}

func generateTestHistogramDataPoint() HistogramDataPoint {
	tv := newHistogramDataPoint(&otlpmetrics.HistogramDataPoint{})
	fillTestHistogramDataPoint(tv)
	return tv
}

func fillTestHistogramDataPoint(tv HistogramDataPoint) {
	tv.SetLabelsMap(generateTestStringMap())
	tv.SetStartTime(TimestampUnixNano(1234567890))
	tv.SetTimestamp(TimestampUnixNano(1234567890))
	tv.SetCount(uint64(17))
	tv.SetSum(float64(17.13))
	tv.SetBuckets(generateTestHistogramBucketSlice())
	tv.SetExplicitBounds([]float64{1, 2, 3})
}

func generateTestHistogramBucketSlice() HistogramBucketSlice {
	tv := NewHistogramBucketSlice(13)
	for i := 0; i < tv.Len(); i++ {
		fillTestHistogramBucket(tv.Get(i))
	}
	return tv
}

func generateTestHistogramBucket() HistogramBucket {
	tv := newHistogramBucket(&otlpmetrics.HistogramDataPoint_Bucket{})
	fillTestHistogramBucket(tv)
	return tv
}

func fillTestHistogramBucket(tv HistogramBucket) {
	tv.SetCount(uint64(17))
	tv.InitExemplarIfNil()
	fillTestHistogramBucketExemplar(tv.Exemplar())
}

func generateTestHistogramBucketExemplar() HistogramBucketExemplar {
	tv := newHistogramBucketExemplar(&otlpmetrics.HistogramDataPoint_Bucket_Exemplar{})
	fillTestHistogramBucketExemplar(tv)
	return tv
}

func fillTestHistogramBucketExemplar(tv HistogramBucketExemplar) {
	tv.SetTimestamp(TimestampUnixNano(1234567890))
	tv.SetValue(float64(17.13))
	tv.SetAttachments(generateTestStringMap())
}

func generateTestSummaryDataPointSlice() SummaryDataPointSlice {
	tv := NewSummaryDataPointSlice(13)
	for i := 0; i < tv.Len(); i++ {
		fillTestSummaryDataPoint(tv.Get(i))
	}
	return tv
}

func generateTestSummaryDataPoint() SummaryDataPoint {
	tv := newSummaryDataPoint(&otlpmetrics.SummaryDataPoint{})
	fillTestSummaryDataPoint(tv)
	return tv
}

func fillTestSummaryDataPoint(tv SummaryDataPoint) {
	tv.SetLabelsMap(generateTestStringMap())
	tv.SetStartTime(TimestampUnixNano(1234567890))
	tv.SetTimestamp(TimestampUnixNano(1234567890))
	tv.SetCount(uint64(17))
	tv.SetSum(float64(17.13))
	tv.SetValueAtPercentiles(generateTestSummaryValueAtPercentileSlice())
}

func generateTestSummaryValueAtPercentileSlice() SummaryValueAtPercentileSlice {
	tv := NewSummaryValueAtPercentileSlice(13)
	for i := 0; i < tv.Len(); i++ {
		fillTestSummaryValueAtPercentile(tv.Get(i))
	}
	return tv
}

func generateTestSummaryValueAtPercentile() SummaryValueAtPercentile {
	tv := newSummaryValueAtPercentile(&otlpmetrics.SummaryDataPoint_ValueAtPercentile{})
	fillTestSummaryValueAtPercentile(tv)
	return tv
}

func fillTestSummaryValueAtPercentile(tv SummaryValueAtPercentile) {
	tv.SetPercentile(float64(0.90))
	tv.SetValue(float64(17.13))
}
